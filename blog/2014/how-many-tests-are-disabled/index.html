<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="How many tests are disabled?" />
<meta property="og:description" content="tl;dr Look for reports like this in the near future!

At Mozilla, platform developers are culturally bound to tbpl. We spend a lot of time staring at
those bright little letters, and their colour can mean the difference between hours, days or even
weeks of work. With so many people performing over 420 pushes per day, all watching,
praying, rejoicing and cursing, it&rsquo;s paramount that the whole process operates like a well oiled
machine.

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ahal.ca/blog/2014/how-many-tests-are-disabled/" />



<meta property="article:published_time" content="2014-10-01T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2014-10-01T00:00:00&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How many tests are disabled?"/>
<meta name="twitter:description" content="tl;dr Look for reports like this in the near future!

At Mozilla, platform developers are culturally bound to tbpl. We spend a lot of time staring at
those bright little letters, and their colour can mean the difference between hours, days or even
weeks of work. With so many people performing over 420 pushes per day, all watching,
praying, rejoicing and cursing, it&rsquo;s paramount that the whole process operates like a well oiled
machine.

"/>
<meta name="generator" content="Hugo 0.42.1" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "How many tests are disabled?",
  "url": "https://ahal.ca/blog/2014/how-many-tests-are-disabled/",
  "wordCount": "548",
  "datePublished": "2014-10-01T00:00:00&#43;00:00",
  "dateModified": "2014-10-01T00:00:00&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "Andrew Halberstadt"
  },
  "keywords": "ateam, mozilla, test-informant"
}
</script>



    <link rel="canonical" href="https://ahal.ca/blog/2014/how-many-tests-are-disabled/">

    <title>How many tests are disabled? | Hunting the Shmoo</title>

    <!-- combined, minified CSS -->
    <link href="https://ahal.ca/css/style.css" rel="stylesheet" integrity="sha384-TbfEhJn4HkgPUIZUhhHaAYsycYKHxSuIloCjZOiyCSpbVunRQxg5T5pxKVFwxilF" crossorigin="anonymous">

    

    

    

    <link rel="shortcut icon" href="/favicon.png">
<link href="https://ahal.ca/css/override.css" rel="stylesheet">
<script type="text/javascript" src="/js/menu.js"></script>

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="https://ahal.ca/">Home</a>
          
          <a class="nav-link active" href="/blog/" title="">Blog</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="https://ahal.ca/" rel="home">Hunting the Shmoo</a></h1>
        <p class="lead blog-description">Ramblings related to my work at Mozilla and other projects.</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="https://ahal.ca/blog/2014/how-many-tests-are-disabled/">How many tests are disabled?</a></h2>
    <p class="blog-post-meta"><time datetime="2014-10-01T00:00:00Z">Oct 01, 2014</time> by Andrew Halberstadt in 

<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/ateam" rel="tag">ateam</a>, <a href="/tags/mozilla" rel="tag">mozilla</a>, <a href="/tags/test-informant" rel="tag">test-informant</a>

</p>
  </header>
  <p>tl;dr Look for <a href="http://people.mozilla.org/~ahalberstadt/informant-reports/daily/2014-09-29.informant-report.html">reports like this</a> in the near future!</p>

<p>At Mozilla, platform developers are culturally bound to <a href="http://tbpl.mozilla.org">tbpl</a>. We spend a lot of time staring at
those bright little letters, and their colour can mean the difference between hours, days or even
weeks of work. With so many people performing over <a href="http://relengofthenerds.blogspot.ca/2014/09/mozilla-pushes-august-2014.html">420 pushes per day</a>, all watching,
praying, rejoicing and cursing, it&rsquo;s paramount that the whole process operates like a well oiled
machine.</p>

<p></p>

<p>So when a test starts intermittently failing, and there aren&rsquo;t any obvious changesets to blame,
it&rsquo;ll often get disabled in the name of keeping things running. A bug will be filed, some people
will be cc&rsquo;ed, and more often than not, it will languish. People who really care about tests know
this. They have an innate and deep fear that there are tests out there that would catch major and
breaking regressions, but for the fact that they are disabled. Unfortunately, there was never a good
way to see, at a high level, which tests were disabled for a given platform. So these people who
care so much have to go about their jobs with a vague sense of impending doom. Until now.</p>

<h2 id="a-concrete-sense-of-impending-doom">A Concrete Sense of Impending Doom</h2>

<p><a href="https://wiki.mozilla.org/Auto-tools/Projects/Test-Informant">Test Informant</a> is a new service which aims to bring some visibility into the state of tests for
a variety of suites and platforms. It listens to <a href="https://wiki.mozilla.org/Auto-tools/Projects/Pulse">pulse messages</a> from mozilla-central for a
variety of build configurations, downloads the associated tests bundle, parses as many manifests as
it can and saves the results to a mongo database.</p>

<p>There is a script that queries the database and can generate reports (e.g <a href="http://people.mozilla.org/~ahalberstadt/informant-reports/daily/2014-09-29.informant-report.html">like this</a>), including
how many tests have been enabled or disabled over a given period of time. This means instead of a
vague sense of impending doom, you can tell at a glance exactly how doomed we are.</p>

<p>There are still a few manual steps required to generate and post the reports, but I intend to fully
automate the process (including a weekly digest link posted to dev.platform).</p>

<h2 id="over-the-hill-and-far-away">Over the Hill and Far Away</h2>

<p>There are a number of improvements that can be made to this system. We may or may not implement them
based on the initial feedback we get from these reports. Possible improvements include:</p>

<ul>
<li>Support for additional suites and platforms.</li>
<li>A web dashboard with graphs and other visualizations.</li>
<li>Email notifications when tests are enabled/disabled on a per-module basis.</li>
<li>Exposing the database publicly so other tools can use it (e.g a mach command).</li>
</ul>

<p>There are also some known limitations:</p>

<ul>
<li>No data for b2g or android platforms (blocked by bugs <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1071642">1071642</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1066735">1066735</a> respectively).</li>
<li>No data for suite *. At the moment, only suites that live in the tests bundle and that have
manifestparser based manifests (the .ini format) are supported. We may extend the tool to other
formats at a later date.</li>
<li>Run-time filters not taken into account. Because the tool doesn&rsquo;t actually run any tests, it doesn&rsquo;t
know about any filters added by the test harness at run-time. Because all of reftest&rsquo;s filtering
happens at runtime, it&rsquo;s unlikely reftest will be supported anytime soon.</li>
</ul>

<p>If you would like to contribute, or just take a look at the source, it&rsquo;s <a href="https://github.com/ahal/test-informant">all on github</a>.</p>

<p>As always, let me know if you have any questions!</p>

  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fahal.ca%2fblog%2f2014%2fhow-many-tests-are-disabled%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=https%3a%2f%2fahal.ca%2fblog%2f2014%2fhow-many-tests-are-disabled%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fahal.ca%2fblog%2f2014%2fhow-many-tests-are-disabled%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=https%3a%2f%2fahal.ca%2fblog%2f2014%2fhow-many-tests-are-disabled%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  

  
    <section class="post-comments">
      








































      <br>
      <h4>Leave a comment</h4>
<form class="post-new-comment" method="POST" action="https://api.staticman.net/v2/entry/ahal/hunting-the-shmoo/master/comments">
    <input type="hidden" name="options[redirect]" value="https://ahal.ca/blog/2014/how-many-tests-are-disabled/#comment-submitted">
    <input type="hidden" name="options[slug]" value="how-many-tests-are-disabled">
    <input class="post-comment-field" name="fields[name]" type="text" placeholder="Name (required)">
    <input class="post-comment-field" name="fields[email]" type="email" placeholder="E-mail (optional)">
    <input class="post-comment-field" name="fields[url]" type="text" placeholder="Website or social media (optional)">
    <textarea class="post-comment-field" name="fields[msg]" placeholder="Message (required, markdown enabled)" rows="10"></textarea>
    <input class="post-comment-field btn" type="submit" value="Submit">
</form>

<div id="comment-submitted">
  <p>Your comment has been submitted and will be published once it has been approved.</p>
</div>

    </section>
  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/blog/2018/website-refresh/">A New Look and Feel (and everything else)</a></li>

<li><a href="/blog/2017/mach-try-fuzzy/">Try Fuzzy: A Try Syntax Alternative</a></li>

<li><a href="/blog/2017/mercurial-absorb/">Absorbing Changes into a Commit Series with Mercurial</a></li>

<li><a href="/blog/2017/fuzzy-try-chooser/">A Course of Action for Replacing Try Syntax</a></li>

<li><a href="/blog/2016/taskcluster-interactive-loaner/">Using One Click Loaner to Debug Failures</a></li>

<li><a href="/blog/2016/zen-of-mach/">The Zen of Mach</a></li>

<li><a href="/blog/2015/try-syntax/">Looking beyond Try Syntax</a></li>

<li><a href="/blog/2015/making-mercurial-bookmarks-more-git-like/">Making mercurial bookmarks more git-like</a></li>

<li><a href="/blog/2015/new-mercurial-workflow-part-2/">The New Mercurial Workflow - Part 2</a></li>

<li><a href="/blog/2014/consume-structured-test-results/">How to Consume Structured Test Results</a></li>

    </ol>
  </section>

  

  

  
  <section class="sidebar-module tag-cloud">
    <h4>Tag Cloud</h4>
    
    
        
            
            <a href="/tags/mozilla">mozilla</a>
        
    
        
            
            <a href="/tags/ateam">ateam</a>
        
    
        
            
            <a href="/tags/b2g">b2g</a>
        
    
        
            
            <a href="/tags/mercurial">mercurial</a>
        
    
        
            
            <a href="/tags/mach">mach</a>
        
    
        
            
            <a href="/tags/programming">programming</a>
        
    
        
            
            <a href="/tags/try">try</a>
        
    
        
            
            <a href="/tags/fzf">fzf</a>
        
    
        
            
            <a href="/tags/mozconfigwrapper">mozconfigwrapper</a>
        
    
        
            
            <a href="/tags/mozmill">mozmill</a>
        
    
        
            
            <a href="/tags/python">python</a>
        
    
        
            
            <a href="/tags/website">website</a>
        
    
        
            
            <a href="/tags/absorb">absorb</a>
        
    
        
            
            <a href="/tags/addon">addon</a>
        
    
        
            
            <a href="/tags/android">android</a>
        
    
        
            
            <a href="/tags/bookbinder">bookbinder</a>
        
    
        
            
            <a href="/tags/cycling">cycling</a>
        
    
        
            
            <a href="/tags/django">django</a>
        
    
        
            
            <a href="/tags/hugo">hugo</a>
        
    
        
            
            <a href="/tags/mozharness">mozharness</a>
        
    
        
            
            <a href="/tags/mozprofile">mozprofile</a>
        
    
        
            
            <a href="/tags/music">music</a>
        
    
        
            
            <a href="/tags/peptest">peptest</a>
        
    
        
            
            <a href="/tags/qqver">qqver</a>
        
    
        
            
            <a href="/tags/reddit">reddit</a>
        
    
        
            
            <a href="/tags/reftest">reftest</a>
        
    
        
            
            <a href="/tags/staticman">staticman</a>
        
    
        
            
            <a href="/tags/taskcluster">taskcluster</a>
        
    
        
            
            <a href="/tags/test-informant">test-informant</a>
        
    
        
            
            <a href="/tags/toronto">toronto</a>
        
    
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      © 2018 Andrew Halberstadt
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
