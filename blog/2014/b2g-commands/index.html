<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Add more mach to your B2G" />
<meta property="og:description" content="Getting Started

tl;dr - It is possible to add more mach to your B2G repo! To get started, install pip:
$ wget https://raw.github.com/pypa/pip/master/contrib/get-pip.py -O - | python
Install b2g-commands:
$ pip install b2g-commands
To play around with it, cd to your B2G repo and run:
$ git pull                 # make sure repo is up to date
$ ./mach help              # see all available commands
$ ./mach help &amp;lt;command&amp;gt;    # see additional info about a command
Details

Most people who spend the majority of their time working within mozilla-central have probably been
acquainted with mach. In case you aren&rsquo;t acquainted, mach is a generic command dispatching
tool. It is possible to write scripts called &lsquo;mach targets&rsquo; which get registered with mach core and
transformed into commands. Mach targets in mozilla-central have access to all sorts of powerful
hooks into the build and test infrastructure which allow them to do some really cool things, such as
bootstrapping your environment, running builds and tests, and generating diagnostics.

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ahal.ca/blog/2014/b2g-commands/" />



<meta property="article:published_time" content="2014-03-06T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2014-03-06T00:00:00&#43;00:00"/>











<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Add more mach to your B2G"/>
<meta name="twitter:description" content="Getting Started

tl;dr - It is possible to add more mach to your B2G repo! To get started, install pip:
$ wget https://raw.github.com/pypa/pip/master/contrib/get-pip.py -O - | python
Install b2g-commands:
$ pip install b2g-commands
To play around with it, cd to your B2G repo and run:
$ git pull                 # make sure repo is up to date
$ ./mach help              # see all available commands
$ ./mach help &amp;lt;command&amp;gt;    # see additional info about a command
Details

Most people who spend the majority of their time working within mozilla-central have probably been
acquainted with mach. In case you aren&rsquo;t acquainted, mach is a generic command dispatching
tool. It is possible to write scripts called &lsquo;mach targets&rsquo; which get registered with mach core and
transformed into commands. Mach targets in mozilla-central have access to all sorts of powerful
hooks into the build and test infrastructure which allow them to do some really cool things, such as
bootstrapping your environment, running builds and tests, and generating diagnostics.

"/>
<meta name="generator" content="Hugo 0.42.1" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Add more mach to your B2G",
  "url": "https://ahal.ca/blog/2014/b2g-commands/",
  "wordCount": "582",
  "datePublished": "2014-03-06T00:00:00&#43;00:00",
  "dateModified": "2014-03-06T00:00:00&#43;00:00",
  "author": {
    "@type": "Person",
    "name": "Andrew Halberstadt"
  },
  "keywords": "ateam, b2g, mozilla, mach"
}
</script>



    <link rel="canonical" href="https://ahal.ca/blog/2014/b2g-commands/">

    <title>Add more mach to your B2G | Hunting the Shmoo</title>

    <!-- combined, minified CSS -->
    <link href="https://ahal.ca/css/style.css" rel="stylesheet" integrity="sha384-TbfEhJn4HkgPUIZUhhHaAYsycYKHxSuIloCjZOiyCSpbVunRQxg5T5pxKVFwxilF" crossorigin="anonymous">

    

    

    

    <link rel="shortcut icon" href="/favicon.png">
<link href="https://ahal.ca/css/override.css" rel="stylesheet">
<script type="text/javascript" src="/js/menu.js"></script>

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link " href="https://ahal.ca/">Home</a>
          
          <a class="nav-link active" href="/blog/" title="">Blog</a>
          
        </nav>
      </div>
    </div>
    

    
    <header class="blog-header">
      <div class="container">
        <h1 class="blog-title"><a href="https://ahal.ca/" rel="home">Hunting the Shmoo</a></h1>
        <p class="lead blog-description">Ramblings related to my work at Mozilla and other projects.</p>
      </div>
    </header>
    

    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="https://ahal.ca/blog/2014/b2g-commands/">Add more mach to your B2G</a></h2>
    <p class="blog-post-meta"><time datetime="2014-03-06T00:00:00Z">Mar 06, 2014</time> by Andrew Halberstadt in 

<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/ateam" rel="tag">ateam</a>, <a href="/tags/b2g" rel="tag">b2g</a>, <a href="/tags/mozilla" rel="tag">mozilla</a>, <a href="/tags/mach" rel="tag">mach</a>

</p>
  </header>
  <h4 id="getting-started">Getting Started</h4>

<p>tl;dr - It is possible to add more mach to your B2G repo! To get started, install pip:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget https://raw.github.com/pypa/pip/master/contrib/get-pip.py -O - | python</code></pre></div>
<p>Install b2g-commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install b2g-commands</code></pre></div>
<p>To play around with it, cd to your <a href="https://github.com/mozilla-b2g/B2G">B2G repo</a> and run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git pull                 <span style="color:#75715e"># make sure repo is up to date
</span><span style="color:#75715e"></span>$ ./mach help              <span style="color:#75715e"># see all available commands
</span><span style="color:#75715e"></span>$ ./mach help &amp;lt;command&amp;gt;    # see additional info about a command</code></pre></div>
<h4 id="details">Details</h4>

<p>Most people who spend the majority of their time working within mozilla-central have probably been
acquainted with <a href="https://developer.mozilla.org/en-US/docs/Developer_Guide/mach">mach</a>. In case you aren&rsquo;t acquainted, mach is a generic command dispatching
tool. It is possible to write scripts called &lsquo;mach targets&rsquo; which get registered with mach core and
transformed into commands. Mach targets in mozilla-central have access to all sorts of powerful
hooks into the build and test infrastructure which allow them to do some really cool things, such as
bootstrapping your environment, running builds and tests, and generating diagnostics.</p>

<p></p>

<p>A contributor (kyr0) and I have been working on a side project called <a href="https://github.com/ahal/b2g-commands">b2g-commands</a> to start
bringing some of that awesomeness to B2G. At the moment b2g-commands wraps most of the major B2G
shell scripts, and provides some brand new ones as well. Here is a summary of its current features:</p>

<ul>
<li>Bootstrap your environment - sets up system packages needed to build (includes setting up gcc-4.6)</li>
<li>Easy to discover arguments - no need to memorize or look up random environment variables</li>
<li>Helpful error messages where possible - clear explanations of what went wrong and how to fix it</li>
<li>Fully compatible with existing build system including .userconfig</li>
<li>List Android vendor ids for udev rules</li>
<li>Clobber objdir/out directories</li>
</ul>

<p>I feel it&rsquo;s important to re-iterate, that this is <em>not</em> a replacement for the current build system.
You can have b2g-commands installed and still keep your existing workflows if desired. Also
important to note is that there&rsquo;s a good chance you&rsquo;ll find bugs (especially related to the
bootstrap command on varying platforms), or arguments missing from your favourite commands. In this
case please don&rsquo;t hesitate to contact me or <a href="https://github.com/ahal/b2g-commands/issues/new">file an issue</a>. Or, even better, submit a pull
request!</p>

<p>If the feature set feels a bit underwhelming, that&rsquo;s because this is just a first iteration. I think
there is a lot of potential here to <a href="https://github.com/ahal/b2g-commands/issues">add some really useful things</a>.  Unfortunately, this is just
a side project I&rsquo;ve been working on and I don&rsquo;t have as much time to devote to it as I would like.
So I encourage you to submit pull requests (or at least submit an issue) for any additional
functionality you would like to see. In general I&rsquo;ll be very open to adding new features.</p>

<h4 id="future-plans">Future Plans</h4>

<p>In the end, because this module lives outside the build system, it will only ever be able to wrap
existing commands or create new ones from scratch. This means it will be somewhat limited in what it
is capable of providing. The targets in this module don&rsquo;t have the same low-level hooks into the B2G
and gaia repos like the targets for desktop do into gecko. My hope is that if a certain feature in
this module turns out to be especially useful and/or widely used it&rsquo;ll get merged into the B2G repo
and be available by default.</p>

<p>Eventually my hope is that we implement some deeper mach integration into the various B2G repos
(especially gaia) which would allow us to create even more powerful commands. I guess time will
tell.</p>

  

  
  <hr>
  <footer>

  
    <section>
    <h4>Share</h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fahal.ca%2fblog%2f2014%2fb2g-commands%2f" title="Share on Facebook"><span class="fa fa-facebook fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://plus.google.com/share?url=https%3a%2f%2fahal.ca%2fblog%2f2014%2fb2g-commands%2f" title="Share on Google+"><span class="fa fa-google-plus fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fahal.ca%2fblog%2f2014%2fb2g-commands%2f" title="Share on LinkedIn"><span class="fa fa-linkedin fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/home?status=https%3a%2f%2fahal.ca%2fblog%2f2014%2fb2g-commands%2f" title="Tweet this"><span class="fa fa-twitter fa-2x"></span></a>
    </nav>
  </section>

  

  

  
    <section class="post-comments">
      








































      <br>
      <h4>Leave a comment</h4>
<form class="post-new-comment" method="POST" action="https://api.staticman.net/v2/entry/ahal/hunting-the-shmoo/master/comments">
    <input type="hidden" name="options[redirect]" value="https://ahal.ca/blog/2014/b2g-commands/#comment-submitted">
    <input type="hidden" name="options[slug]" value="b2g-commands">
    <input class="post-comment-field" name="fields[name]" type="text" placeholder="Name (required)">
    <input class="post-comment-field" name="fields[email]" type="email" placeholder="E-mail (optional)">
    <textarea class="post-comment-field" name="fields[msg]" placeholder="Message (required, markdown enabled)" rows="10"></textarea>
    <input class="post-comment-field btn" type="submit" value="Submit">
</form>

<div id="comment-submitted">
  <p>Your comment has been submitted and will be published once it has been approved.</p>
</div>

    </section>
  
  </footer>
  

</article> 



        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/blog/2018/website-refresh/">A New Look and Feel (and everything else)</a></li>

<li><a href="/blog/2017/mach-try-fuzzy/">Try Fuzzy: A Try Syntax Alternative</a></li>

<li><a href="/blog/2017/mercurial-absorb/">Absorbing Changes into a Commit Series with Mercurial</a></li>

<li><a href="/blog/2017/fuzzy-try-chooser/">A Course of Action for Replacing Try Syntax</a></li>

<li><a href="/blog/2016/taskcluster-interactive-loaner/">Using One Click Loaner to Debug Failures</a></li>

<li><a href="/blog/2016/zen-of-mach/">The Zen of Mach</a></li>

<li><a href="/blog/2015/try-syntax/">Looking beyond Try Syntax</a></li>

<li><a href="/blog/2015/making-mercurial-bookmarks-more-git-like/">Making mercurial bookmarks more git-like</a></li>

<li><a href="/blog/2015/new-mercurial-workflow-part-2/">The New Mercurial Workflow - Part 2</a></li>

<li><a href="/blog/2014/consume-structured-test-results/">How to Consume Structured Test Results</a></li>

    </ol>
  </section>

  

  

  
  <section class="sidebar-module tag-cloud">
    <h4>Tag Cloud</h4>
    
    
        
            
            <a href="/tags/mozilla">mozilla</a>
        
    
        
            
            <a href="/tags/ateam">ateam</a>
        
    
        
            
            <a href="/tags/b2g">b2g</a>
        
    
        
            
            <a href="/tags/mercurial">mercurial</a>
        
    
        
            
            <a href="/tags/mach">mach</a>
        
    
        
            
            <a href="/tags/programming">programming</a>
        
    
        
            
            <a href="/tags/try">try</a>
        
    
        
            
            <a href="/tags/fzf">fzf</a>
        
    
        
            
            <a href="/tags/mozconfigwrapper">mozconfigwrapper</a>
        
    
        
            
            <a href="/tags/mozmill">mozmill</a>
        
    
        
            
            <a href="/tags/python">python</a>
        
    
        
            
            <a href="/tags/website">website</a>
        
    
        
            
            <a href="/tags/absorb">absorb</a>
        
    
        
            
            <a href="/tags/addon">addon</a>
        
    
        
            
            <a href="/tags/android">android</a>
        
    
        
            
            <a href="/tags/bookbinder">bookbinder</a>
        
    
        
            
            <a href="/tags/cycling">cycling</a>
        
    
        
            
            <a href="/tags/django">django</a>
        
    
        
            
            <a href="/tags/hugo">hugo</a>
        
    
        
            
            <a href="/tags/mozharness">mozharness</a>
        
    
        
            
            <a href="/tags/mozprofile">mozprofile</a>
        
    
        
            
            <a href="/tags/music">music</a>
        
    
        
            
            <a href="/tags/peptest">peptest</a>
        
    
        
            
            <a href="/tags/qqver">qqver</a>
        
    
        
            
            <a href="/tags/reddit">reddit</a>
        
    
        
            
            <a href="/tags/reftest">reftest</a>
        
    
        
            
            <a href="/tags/staticman">staticman</a>
        
    
        
            
            <a href="/tags/taskcluster">taskcluster</a>
        
    
        
            
            <a href="/tags/test-informant">test-informant</a>
        
    
        
            
            <a href="/tags/toronto">toronto</a>
        
    
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p>
      
      © 2018 Andrew Halberstadt
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
