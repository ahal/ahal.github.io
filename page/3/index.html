<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Hunting the Shmoo" />
<meta property="og:description" content="Screencasts and blog posts on workflow, productivity, tools, Mozilla and whatever else tickles my fancy." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ahal.ca/" />
<meta property="og:updated_time" content="2020-07-10T12:08:34-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hunting the Shmoo"/>
<meta name="twitter:description" content="Screencasts and blog posts on workflow, productivity, tools, Mozilla and whatever else tickles my fancy."/>
<meta name="generator" content="Hugo 0.73.0" />


    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Blog",
  "headline": "Hunting the Shmoo",
  "url" : "https:\/\/ahal.ca\/",
  "author": {
    "@type": "Person",
    "name": "Andrew Halberstadt"
  },
  "dateModified": "2020-07-10T12:08:34-04:00",
  "keywords": "absorb,addon,android,ateam,b2g,bookbinder,cycling,django,fzf,hugo,jetty,mach,mercurial,mozconfigwrapper,mozharness,mozilla,mozmill,mozprofile,music,peptest,programming,python,qqver,reddit,reftest,staticman,taskcluster,taskgraph,test-informant,toronto,try,website,",
  "description": "Screencasts and blog posts on workflow, productivity, tools, Mozilla and whatever else tickles my fancy."
}
</script>


    <link rel="canonical" href="https://ahal.ca/">

    <title>Hunting the Shmoo</title>

    
    <!-- combined, minified CSS -->
    
    <link href="https://ahal.ca/css/style.e408605af1290e616960aef7be39db8d54400ce717e8e4f12f733d8fb56d62ee.css" rel="stylesheet" integrity="sha256-5AhgWvEpDmFpYK73vjnbjVRADOcX6OTxL3M9j7VtYu4=" crossorigin="anonymous">
    

    <!-- minified Font Awesome for SVG icons -->
    
    <script defer src="https://ahal.ca/js/fontawesome.min.16a86fa8fbdecc0f27392feecb61ee0803a507820bded359407103a49126b52c.js" integrity="sha256-FqhvqPvezA8nOS/uy2HuCAOlB4IL3tNZQHEDpJEmtSw=" crossorigin="anonymous"></script>

    <!-- RSS 2.0 feed -->
    <link rel="alternate" type="application/rss+xml" href="https://ahal.ca/index.xml" title="Hunting the Shmoo" />
    

    <link rel="shortcut icon" href="/favicon.png">
<link href="https://ahal.ca/css/bootstrap.min.css" rel="stylesheet">
<link href="https://ahal.ca/css/override.css" rel="stylesheet">
<link href="https://ahal.ca/css/debugprint.css" rel="stylesheet">
<script type="text/javascript" src="/js/menu.js"></script>

  </head>

  <body>

    
    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link active" href="https://ahal.ca/">Home</a>
          
          <a class="nav-link" href="/blog/" title="">Blog</a>
          
          
          <a class="nav-link" href="/casts/" title="">Casts</a>
          
        </nav>
      </div>
    </div>
    

    

    <header class="blog-header">
      <div class="container blockquote">
        <p class="lead blog-description"><i>Screencasts and blog posts on workflow, productivity, tools, Mozilla and whatever else tickles my fancy.</i></p>
      </div>
    </header>




    
    <div class="container">
      <div class="row">
        <div class="col-sm-8 blog-main">

          






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2014/b2g-commands/">Add more mach to your B2G</a></h2>
    <p class="blog-post-meta"><time datetime="2014-03-06T00:00:00Z">Mar 06, 2014</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/ateam/" rel="tag">ateam</a>, <a href="/tags/b2g/" rel="tag">b2g</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>, <a href="/tags/mach/" rel="tag">mach</a>

</p>
  </header>
  <h4 id="getting-started">Getting Started</h4>
<p>tl;dr - It is possible to add more mach to your B2G repo! To get started, install pip:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ wget https://raw.github.com/pypa/pip/master/contrib/get-pip.py -O - | python
</code></pre></div><p>Install b2g-commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install b2g-commands
</code></pre></div><p>To play around with it, cd to your <a href="https://github.com/mozilla-b2g/B2G">B2G repo</a> and run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git pull                 <span style="color:#75715e"># make sure repo is up to date</span>
$ ./mach help              <span style="color:#75715e"># see all available commands</span>
$ ./mach help &amp;lt;command&amp;gt;    <span style="color:#75715e"># see additional info about a command</span>
</code></pre></div><h4 id="details">Details</h4>
<p>Most people who spend the majority of their time working within mozilla-central have probably been
acquainted with <a href="https://developer.mozilla.org/en-US/docs/Developer_Guide/mach">mach</a>. In case you aren&rsquo;t acquainted, mach is a generic command dispatching
tool. It is possible to write scripts called &lsquo;mach targets&rsquo; which get registered with mach core and
transformed into commands. Mach targets in mozilla-central have access to all sorts of powerful
hooks into the build and test infrastructure which allow them to do some really cool things, such as
bootstrapping your environment, running builds and tests, and generating diagnostics.</p>
  <a href='https://ahal.ca/blog/2014/b2g-commands/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2014/mach-workflow/">A Workflow for using Mach with multiple Object Directories</a></h2>
    <p class="blog-post-meta"><time datetime="2014-03-03T00:00:00Z">Mar 03, 2014</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/ateam/" rel="tag">ateam</a>, <a href="/tags/mach/" rel="tag">mach</a>, <a href="/tags/mozconfigwrapper/" rel="tag">mozconfigwrapper</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>

</p>
  </header>
  <p><a href="https://developer.mozilla.org/en-US/docs/Developer_Guide/mach">Mach</a> is an amazing tool which facilitates a large number of common user stories in the mozilla
source tree. You can perform initial setup, execute a build, run tests, examine diagnostics, even
search Google. Many of these things require an object directory. This can potentially lead to some
confusion if you typically have more than one object directory at any given time. How does mach know
which object directory to operate on?</p>
  <a href='https://ahal.ca/blog/2014/mach-workflow/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/we-are-all-enablers/">We Are All Enablers</a></h2>
    <p class="blog-post-meta"><time datetime="2013-10-10T00:00:00Z">Oct 10, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/mozilla/" rel="tag">mozilla</a>, <a href="/tags/ateam/" rel="tag">ateam</a>

</p>
  </header>
  <p>This probably isn&rsquo;t a groundbreaking revelation to most Mozillians, but it&rsquo;s something I haven&rsquo;t
quite managed to put into words until now.</p>
<p>On the Tools and Automation team at Mozilla, the easiest way to describe what we do is to say &ldquo;We
try to make the lives of others within the community easier&rdquo;. This is a vague statement, but it&rsquo;s
about as close as we can get without writing a small dissertation.</p>
  <a href='https://ahal.ca/blog/2013/we-are-all-enablers/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/running-b2g-unittests-mach/">Running B2G unittests with Mach</a></h2>
    <p class="blog-post-meta"><time datetime="2013-09-16T00:00:00Z">Sep 16, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/ateam/" rel="tag">ateam</a>, <a href="/tags/b2g/" rel="tag">b2g</a>, <a href="/tags/mach/" rel="tag">mach</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>

</p>
  </header>
  <p>Before now running &lsquo;classic&rsquo; unittests (mochitest, reftest, xpcshell, etc.) on B2G emulators has
been a massive pain. The new recommended way of running them is through mach.</p>
<ol>
<li>Update B2G repo if you haven&rsquo;t already: <code>git pull</code></li>
<li>Configure an emulator: <code>BRANCH=master ./config.sh emulator</code></li>
<li>Build: <code>./build.sh</code></li>
<li>Run: <code>./mach mochitest-remote</code></li>
</ol>
  <a href='https://ahal.ca/blog/2013/running-b2g-unittests-mach/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/push-custom-test-command-line-try/">How to Push a Custom Test Command Line to Try</a></h2>
    <p class="blog-post-meta"><time datetime="2013-07-24T00:00:00Z">Jul 24, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/ateam/" rel="tag">ateam</a>, <a href="/tags/mozharness/" rel="tag">mozharness</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>

</p>
  </header>
  <h3 id="outdated">OUTDATED</h3>
<p>The steps in this article are no longer accurate. Pushing a custom command line is easier now. See
<a href="https://groups.google.com/forum/#!topic/mozilla.dev.platform/AKDyoQShFEs">here</a> for more details.</p>
<hr>
<p>Have you ever wanted to see the test results of a custom command line in try? Things like
&ndash;test-manifest, &ndash;shuffle or &ndash;run-slower?  Now you can! The process isn&rsquo;t exactly optimized for
the developer use case, but neither is it really difficult to do once you know how.</p>
  <a href='https://ahal.ca/blog/2013/push-custom-test-command-line-try/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/mercurial-extension-qqver/">A Mercurial extension to version multiple patch queues</a></h2>
    <p class="blog-post-meta"><time datetime="2013-06-13T00:00:00Z">Jun 13, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/mercurial/" rel="tag">mercurial</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>, <a href="/tags/qqver/" rel="tag">qqver</a>

</p>
  </header>
  <p><a href="http://hg.mozilla.org/users/ahalberstadt_mozilla.com/qqver/">qqver</a> is a Mercurial extension that forces mq to version all patch queues in the same
repository. The syntax is the exact same as when doing normal patch queue versioning (i.e &lsquo;hg init
&ndash;mq&rsquo;), except the repo is created one directory higher so it is able to track all patch queues. As
with stock queue repos, new and existing patches are added automatically.</p>
  <a href='https://ahal.ca/blog/2013/mercurial-extension-qqver/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/python-logging-format-message/">Python Logging - Format a message without printing it</a></h2>
    <p class="blog-post-meta"><time datetime="2013-04-25T00:00:00Z">Apr 25, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/python/" rel="tag">python</a>

</p>
  </header>
  <p>I came across an odd python problem the other day. I wanted to format a log message without printing
it with python&rsquo;s logging module. But I couldn&rsquo;t find any examples or others who wanted to do the
same thing.</p>
<p>You might ask why I would want to do this. In my case, I was using sys.stdout.write() to display the
progress of a download as a percentage. Python&rsquo;s logging module automatically appends a newline to
your message and there didn&rsquo;t seem to be a way to change this without a subclass. Anytime you want
to overwrite something on the previous line with python logging, you will run into trouble.</p>
  <a href='https://ahal.ca/blog/2013/python-logging-format-message/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/b2g-unittest-crashstacks/">Crash Stacks - Memoirs of a B2G Unittest</a></h2>
    <p class="blog-post-meta"><time datetime="2013-03-28T00:00:00Z">Mar 28, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/b2g/" rel="tag">b2g</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>

</p>
  </header>
  <p>Hey! Check it out, I have crash stacks in my <a href="https://tbpl.mozilla.org/php/getParsedLog.php?id=21215744&amp;full=1&amp;branch=mozilla-inbound">logs</a> now!  I know, I know, I took my sweet time.
I&rsquo;m sorry. I hope this doesn&rsquo;t damage our relationship. Is there anything I can do to make it up to
you? I want to help. I really do. It&rsquo;s just. I don&rsquo;t know. I guess I&rsquo;ve been feeling under the
weather lately. I must have caught a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=846091">bug</a>.</p>
  <a href='https://ahal.ca/blog/2013/b2g-unittest-crashstacks/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2013/enable-b2g-tests/">An Open Invitation to Enable your Favourite tests on B2G</a></h2>
    <p class="blog-post-meta"><time datetime="2013-03-08T00:00:00Z">Mar 08, 2013</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/b2g/" rel="tag">b2g</a>, <a href="/tags/mozilla/" rel="tag">mozilla</a>

</p>
  </header>
  <p>Throughout most of our B2G test automation deployment, we&rsquo;ve been very conscious about not enabling
too many tests simply because we didn&rsquo;t have enough capacity on our test slaves to run them all.
Regardless it was still bad enough as it was (many of you probably experienced very long wait times
for results). Thanks to releng (and especially Rail Aliiev) we are now running most of our B2G tests
in Amazon AWS which means we can be much more flexible in accomodating load.</p>
  <a href='https://ahal.ca/blog/2013/enable-b2g-tests/'>Read more →</a>
</article> 






<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://ahal.ca/blog/2012/guide-to-b2g-testing/">A Tired Developer&rsquo;s non-Illustrated Primer to B2G Testing</a></h2>
    <p class="blog-post-meta"><time datetime="2012-12-21T00:00:00Z">Dec 21, 2012</time> by Andrew Halberstadt in 

<span class="fas fa-tag" aria-hidden="true"></span>&nbsp;<a href="/tags/mozilla/" rel="tag">mozilla</a>, <a href="/tags/ateam/" rel="tag">ateam</a>, <a href="/tags/b2g/" rel="tag">b2g</a>

</p>
  </header>
  <p>As B2G continues to trod onwards to its release, there is still a lot of confusion about the level
and state of test coverage it has.  Back in November we started running mochitests, reftests and
marionette/webapi tests on ARM emulators. Now we&rsquo;ve also added xpcshell tests and for the most part
we have these nice green letters to look at on TBPL that make us feel good about ourselves. But what
is really being run?  What is the meaning behind these letters &ldquo;M&rdquo;, &ldquo;R&rdquo;, &ldquo;Mn&rdquo; and &ldquo;X&rdquo;? Are there any
causes for concern? Are there other tests being run that don&rsquo;t show up on TBPL? What are the current
automation priorities? What are the next platforms to use after emulators?</p>
<p>This blog post aims to answer these questions and more. It is a comprehensive snapshot of the
current state of automated testing on B2G.</p>
  <a href='https://ahal.ca/blog/2012/guide-to-b2g-testing/'>Read more →</a>
</article> 





<nav class="blog-pagination">
  
  <a class="btn btn-outline-primary" href="/page/2/" rel="prev" role="button">Previous page</a>
  <a class="btn btn-outline-primary" href="/page/4/" rel="next" role="button">Next page</a>
  
  
  
</nav>





        </div> <!-- /.blog-main -->

        <aside class="col-sm-3 ml-auto blog-sidebar">
  

  
        <section class="sidebar-module">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">


<li><a href="/blog/2020/testing-firefox-more-efficiently-with-machine-learning/">Testing Firefox More Efficiently With Machine Learning</a></li>

<li><a href="/blog/2019/fragmented-communication/">The Cost of Fragmented Communication</a></li>

<li><a href="/blog/2019/python-3-at-mozilla/">Python 3 at Mozilla</a></li>

<li><a href="/casts/2019/task-configuration-at-scale/">Task Configuration at Scale</a></li>

<li><a href="/casts/2018/taskgraph-like-a-pro/">Taskgraph Like a Pro</a></li>

<li><a href="/blog/2018/website-refresh/">A New Look and Feel (and everything else)</a></li>

<li><a href="/blog/2017/mach-try-fuzzy/">Try Fuzzy: A Try Syntax Alternative</a></li>

<li><a href="/blog/2017/mercurial-absorb/">Absorbing Changes into a Commit Series with Mercurial</a></li>

<li><a href="/blog/2017/fuzzy-try-chooser/">A Course of Action for Replacing Try Syntax</a></li>

<li><a href="/blog/2016/taskcluster-interactive-loaner/">Using One Click Loaner to Debug Failures</a></li>

    </ol>
  </section>

  

  

  
  <section class="sidebar-module tag-cloud">
    <h4>Tag Cloud</h4>
    
    
        
            
            <a href="/tags/mozilla">mozilla</a>
        
    
        
            
            <a href="/tags/ateam">ateam</a>
        
    
        
            
            <a href="/tags/b2g">b2g</a>
        
    
        
            
            <a href="/tags/mercurial">mercurial</a>
        
    
        
            
            <a href="/tags/mach">mach</a>
        
    
        
            
            <a href="/tags/fzf">fzf</a>
        
    
        
            
            <a href="/tags/programming">programming</a>
        
    
        
            
            <a href="/tags/python">python</a>
        
    
        
            
            <a href="/tags/try">try</a>
        
    
        
            
            <a href="/tags/mozconfigwrapper">mozconfigwrapper</a>
        
    
        
            
            <a href="/tags/mozmill">mozmill</a>
        
    
        
            
            <a href="/tags/taskgraph">taskgraph</a>
        
    
        
            
            <a href="/tags/website">website</a>
        
    
        
            
            <a href="/tags/absorb">absorb</a>
        
    
        
            
            <a href="/tags/addon">addon</a>
        
    
        
            
            <a href="/tags/android">android</a>
        
    
        
            
            <a href="/tags/bookbinder">bookbinder</a>
        
    
        
            
            <a href="/tags/cycling">cycling</a>
        
    
        
            
            <a href="/tags/django">django</a>
        
    
        
            
            <a href="/tags/hugo">hugo</a>
        
    
        
            
            <a href="/tags/jetty">jetty</a>
        
    
        
            
            <a href="/tags/mozharness">mozharness</a>
        
    
        
            
            <a href="/tags/mozprofile">mozprofile</a>
        
    
        
            
            <a href="/tags/music">music</a>
        
    
        
            
            <a href="/tags/peptest">peptest</a>
        
    
        
            
            <a href="/tags/qqver">qqver</a>
        
    
        
            
            <a href="/tags/reddit">reddit</a>
        
    
        
            
            <a href="/tags/reftest">reftest</a>
        
    
        
            
            <a href="/tags/staticman">staticman</a>
        
    
        
            
            <a href="/tags/taskcluster">taskcluster</a>
        
    
        
            
            <a href="/tags/test-informant">test-informant</a>
        
    
        
            
            <a href="/tags/toronto">toronto</a>
        
    
  </section>
  
</aside>


      </div> <!-- /.row -->
    </div> <!-- /.container -->
    

    
    <footer class="blog-footer">
      <p dir="auto">
      
      © 2018 Andrew Halberstadt
      
      </p>
      <p>
      <a href="#">Back to top</a>
      </p>
    </footer>
    

  </body>

</html>
